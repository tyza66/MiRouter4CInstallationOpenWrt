webpackJsonp([13],{jcZj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("lC5x"),i=s.n(a),r=s("J0Oq"),o=s.n(r),n=s("teIl"),d=s("n8t0"),u=s("PkfQ"),m=s("NxGh"),l=s("HbzE"),c={name:"wired",data:function(){return{step:2,formstate:{},sameRouterPwd:!0,routerPwd:null,wifi:{name:"Xiaomi_1A1A",ssid:"",password:"",locale:"家",initialize:1,nonce:"",newPwd:"",oldPwd:"",txpwr:1},passtype:"password",Router_passtype:"password",result:{},adminPassword:"",update:!0,clientHeight:document.documentElement.clientHeight,showBtn:!0,frommode:""}},components:{Header:n.a,CheckBox:d.a,Subtitle:u.a,Loading:m.a,Wificomplete:l.default},methods:{handleBack:function(e){this.step=e},updateChange:function(e){this.update=e},switchPwdType:function(e){e?this.Router_passtype="password"===this.Router_passtype?"text":"password":this.passtype="password"===this.passtype?"text":"password"},onSubmit:function(){var e=this;return o()(i.a.mark(function t(){var s,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.sameRouterPwd){t.next=6;break}if(e.routerPwd=e.wifi.password,!e.formstate.name.$invalid&&!e.formstate.password.$invalid){t.next=4;break}return t.abrupt("return");case 4:t.next=8;break;case 6:if(!e.formstate.$invalid){t.next=8;break}return t.abrupt("return");case 8:return e.step=2,e.wifi.ssid=e.wifi.name,e.wifi.nonce=e.common.Encrypt.init(),e.wifi.oldPwd=e.common.Encrypt.oldPwd("admin"),e.wifi.newPwd=e.common.Encrypt.newPwd("admin",e.routerPwd),s={info:"auto_upgrade="+(e.update?1:0)},t.next=16,e.axios.upgrade(s);case 16:return t.sent,t.next=19,e.common.setInitLog({type:0,step:"wire_relay_done"});case 19:return t.next=21,e.axios.postRouterLanap(e.wifi);case 21:0==(a=t.sent).data.code?(e.step=3,e.GLOBAL.adminPassword=e.routerPwd,e.GLOBAL.wifiConfigResult=a.data,e.adminPassword=e.routerPwd,e.result=a.data):e.$router.push({path:"/error2",query:{from:"wired"}});case 23:case"end":return t.stop()}},t,e)}))()},getWanLink:function(){var e=this;return o()(i.a.mark(function t(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.getWanLink();case 2:0==(s=t.sent).data.code&&1==s.data.link?(e.step=1,"error1"==e.frommode&&e.common.setInitLog({type:0,step:"nocable_retry_success"})):("error1"==e.frommode&&e.common.setInitLog({type:0,step:"nocable_retry_fail"}),e.$router.push({path:"/error1",query:{from:"wired"}}));case 4:case"end":return t.stop()}},t,e)}))()}},watch:{step:function(){1==this.step&&this.getWanLink()}},created:function(){this.wifi.name=this.common.getCookie("ssid_name")?this.common.getCookie("ssid_name"):"","error1"==this.$route.query.from?(this.frommode="error1",this.step=1):this.getWanLink()},mounted:function(){var e=this;window.onresize=function(){e.clientHeight>document.documentElement.clientHeight?e.showBtn=!1:e.showBtn=!0}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step ==1"}],staticClass:"container"},[s("Header",{attrs:{name:"有线中继模式",step:e.step},on:{goBack:e.handleBack}}),e._v(" "),s("vue-form",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step===1"}],staticClass:"width100",attrs:{state:e.formstate},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form form-res"},[s("Subtitle",{attrs:{name:"新路由器的WiFi设置"}}),e._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item1"},[s("label",{attrs:{for:"name"}},[e._v("WiFi名称:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.wifi.name,expression:"wifi.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"XIAOMI_1A1A",name:"name",checklength:"",required:""},domProps:{value:e.wifi.name},on:{input:function(t){t.target.composing||e.$set(e.wifi,"name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("validate",{attrs:{tag:"label"}},[s("div",{staticClass:"item item2"},[s("label",{attrs:{for:"name"}},[e._v("WiFi密码:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.wifi.password,expression:"wifi.password",modifiers:{trim:!0}}],attrs:{placeholder:"WiFi密码至少8位",name:"password",type:e.passtype,wifipassword:"",minlength:"8",maxlength:"63",required:""},domProps:{value:e.wifi.password},on:{input:function(t){t.target.composing||e.$set(e.wifi,"password",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"iconfont icon-yanjing-kejian",class:{blue:"text"===e.passtype},on:{click:function(t){e.switchPwdType(0)}}})])]),e._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"name",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("*WiFi名称不能为空")]),e._v(" "),s("div",{attrs:{slot:"checklength"},slot:"checklength"},[e._v("*WiFi名称最多28字节")])]),e._v(" "),s("field-messages",{staticClass:"error-tip",attrs:{name:"password",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("*WiFi密码不能为空")]),e._v(" "),s("div",{attrs:{slot:"minlength"},slot:"minlength"},[e._v("*WiFi密码不少于8位")]),e._v(" "),s("div",{attrs:{slot:"maxlength"},slot:"maxlength"},[e._v("*WiFi密码不多于63位")]),e._v(" "),s("div",{attrs:{slot:"wifipassword"},slot:"wifipassword"},[e._v("*WiFi密码不能包含中文")])]),e._v(" "),s("Subtitle",{directives:[{name:"show",rawName:"v-show",value:!e.sameRouterPwd,expression:"!sameRouterPwd"}],attrs:{name:"管理密码设置"}}),e._v(" "),s("validate",{directives:[{name:"show",rawName:"v-show",value:!e.sameRouterPwd,expression:"!sameRouterPwd"}],attrs:{tag:"label"}},[s("div",{staticClass:"item3 router_password"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.routerPwd,expression:"routerPwd",modifiers:{trim:!0}}],attrs:{name:"routerPwd",placeholder:"请设置管理密码，至少8位",type:e.Router_passtype,wifipassword:"",minlength:"8",maxlength:"63",required:""},domProps:{value:e.routerPwd},on:{input:function(t){t.target.composing||(e.routerPwd=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("span",{staticClass:"iconfont icon-yanjing-kejian",class:{blue:"text"===e.Router_passtype},on:{click:function(t){e.switchPwdType(1)}}})])]),e._v(" "),s("field-messages",{directives:[{name:"show",rawName:"v-show",value:!e.sameRouterPwd,expression:"!sameRouterPwd"}],staticClass:"error-tip",attrs:{name:"routerPwd",show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("*路由器管理密码不能为空")]),e._v(" "),s("div",{attrs:{slot:"minlength"},slot:"minlength"